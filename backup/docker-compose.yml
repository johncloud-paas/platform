version: "3.8"

services:
  app:
    image: lscr.io/linuxserver/duplicati:latest
    environment:
      - PUID=$PUID
      - PGID=$PGID
      - TZ=$TZ
      - CLI_ARGS=$CLI_ARGS
    volumes:
      - $JOHNCLOUD_ROOT/backup/appdata/config:/config
      - $JOHNCLOUD_ROOT/backup/backups:/backups
      - $JOHNCLOUD_ROOT:/source
    ports:
      - 8200:8200
    restart: unless-stopped
    labels:
      - "traefik.enable=true"
      - "traefik.http.routers.wordpress.rule=Host(`$HOST`)"
      - "traefik.http.routers.wordpress.entrypoints=websecure"
      - "traefik.http.routers.wordpress.tls.certresolver=letsencrypt"

networks:
  default:
    external: true
    name: traefik-proxy
    
